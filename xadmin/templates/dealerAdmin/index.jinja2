<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html>
  <head>
    {% from 'basic.html' import basic_header, basic_css_skin, basic_css_ionicons, basic_css_icheck, basic_plugin_clockpicker %}
    {{ basic_header('3.carriges | 商家管理平台') }}
    {{ basic_css_ionicons() }}
    {{ basic_css_icheck() }}
    {{ basic_css_skin('skin-blue') }}
  </head>
  <!--
  BODY TAG OPTIONS:
  =================
  Apply one or more of the following classes to get the
  desired effect
  |---------------------------------------------------------|
  | SKINS         | skin-blue                               |
  |               | skin-black                              |
  |               | skin-purple                             |
  |               | skin-yellow                             |
  |               | skin-red                                |
  |               | skin-green                              |
  |---------------------------------------------------------|
  |LAYOUT OPTIONS | fixed                                   |
  |               | layout-boxed                            |
  |               | layout-top-nav                          |
  |               | sidebar-collapse                        |
  |               | sidebar-mini                            |
  |---------------------------------------------------------|
  -->
  <body class="skin-blue sidebar-mini">
    <div class="wrapper">

      <!-- Main Header -->
      <header class="main-header">

        <!-- Logo -->
        <a href="/dealerAdmin" class="logo">
          <!-- mini logo for sidebar mini 50x50 pixels -->
          <span class="logo-mini"><b>3.</b>CRGs</span>
          <!-- logo for regular state and mobile devices -->
          <span class="logo-lg"><b>三驾马车</b>3.Carriges</span>
        </a>

        <!-- Header Navbar -->
        <nav class="navbar navbar-static-top" role="navigation">
          <!-- Sidebar toggle button-->
          <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
            <span class="sr-only">Toggle navigation</span>
          </a>

          
           <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
              <ul class="nav navbar-nav">
                <li><a href="#">Link <span class="sr-only">(current)</span></a></li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <span class="caret"></span></a>
                  <ul class="dropdown-menu" role="menu">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li class="divider"></li>
                    <li><a href="#">Separated link</a></li>
                    <li class="divider"></li>
                    <li><a href="#">One more separated link</a></li>
                  </ul>
                </li>
              </ul>
              <form class="navbar-form navbar-left" role="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="navbar-search-input" placeholder="Search">
                </div>
              </form>                          
            </div><!-- /.navbar-collapse -->
          
          
          <!-- Navbar Right Menu -->
          <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">              
              <!-- Messages: style can be found in dropdown.less-->
              <li class="dropdown messages-menu">
                <!-- Menu toggle button -->
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <i class="fa fa-envelope-o"> 消息</i>
                  <span class="label label-success">4</span>
                </a>
                <ul class="dropdown-menu">
                  <li class="header">You have 4 messages</li>
                  <li>
                    <!-- inner menu: contains the messages -->
                    <ul class="menu">
                      <li><!-- start message -->
                        <a href="#">
                          <div class="pull-left">
                            <!-- User Image -->
                            <img src="/static/adminlte/dist/img/user2-160x160.jpg" class="img-circle" alt="User Image"/>
                          </div>
                          <!-- Message title and timestamp -->
                          <h4>
                            Support Team
                            <small><i class="fa fa-clock-o"></i> 5 mins</small>
                          </h4>
                          <!-- The message -->
                          <p>Why not buy a new awesome theme?</p>
                        </a>
                      </li><!-- end message -->
                    </ul><!-- /.menu -->
                  </li>
                  <li class="footer"><a href="#">See All Messages</a></li>
                </ul>
              </li><!-- /.messages-menu -->

              <!-- Notifications Menu -->
              <li class="dropdown notifications-menu">
                <!-- Menu toggle button -->
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <i class="fa fa-bell-o"> 通知</i>
                  <span class="label label-warning">10</span>
                </a>
                <ul class="dropdown-menu">
                  <li class="header">You have 10 notifications</li>
                  <li>
                    <!-- Inner Menu: contains the notifications -->
                    <ul class="menu">
                      <li><!-- start notification -->
                        <a href="#">
                          <i class="fa fa-users text-aqua"></i> 5 new members joined today
                        </a>
                      </li><!-- end notification -->
                    </ul>
                  </li>
                  <li class="footer"><a href="#">View all</a></li>
                </ul>
              </li>
              <!-- Tasks Menu -->
              <li class="dropdown tasks-menu">
                <!-- Menu Toggle Button -->
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <i class="fa fa-taxi"> 任务项</i>
                  <span class="label label-danger">9</span>
                </a>
                <ul class="dropdown-menu">
                  <li class="header">You have 9 tasks</li>
                  <li>
                    <!-- Inner menu: contains the tasks -->
                    <ul class="menu">
                      <li><!-- Task item -->
                        <a href="#">
                          <!-- Task title and progress text -->
                          <h3>
                            Design some buttons
                            <small class="pull-right">20%</small>
                          </h3>
                          <!-- The progress bar -->
                          <div class="progress xs">
                            <!-- Change the css width attribute to simulate progress -->
                            <div class="progress-bar progress-bar-aqua" style="width: 20%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
                              <span class="sr-only">20% Complete</span>
                            </div>
                          </div>
                        </a>
                      </li><!-- end task item -->
                    </ul>
                  </li>
                  <li class="footer">
                    <a href="#">View all tasks</a>
                  </li>
                </ul>
              </li>
              <!-- User Account Menu -->
              <li class="dropdown user user-menu">
                <!-- Menu Toggle Button -->
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <!-- The user image in the navbar-->
                  <img src="/static/adminlte/dist/img/{{ User.avatar }}" class="user-image" alt="User Image"/>
                  <!-- hidden-xs hides the username on small devices so only the image appears. -->
                  <span class="hidden-xs">{{ User.loginame }}</span>
                </a>
                <ul class="dropdown-menu">
                  <!-- The user image in the menu -->
                  <li class="user-header">
                    <img src="/static/adminlte/dist/img/{{ User.avatar }}" class="img-circle" alt="User Image" />
                    <p>{{ User.nickname }}</p>
                  </li>
                  <!-- Menu Body -->

                  <li class="user-body">
                                      <!--
                    <div class="col-xs-4 text-center">
                      <a href="#">Followers</a>
                    </div>
                    <div class="col-xs-4 text-center">
                      <a href="#">本月销量</a>
                    </div>
                    <div class="col-xs-4 text-center">
                      <a href="#">Friends</a>
                    </div>-->
                  </li>
                  <!-- Menu Footer-->
                  <li class="user-footer">
                    <div class="pull-left">
                      <a href="javascript:void(0);" onclick="return userInfo()" class="btn btn-default btn-flat">个人中心</a>
                    </div>
                    <div class="pull-right">
                      <a href="/dealerAdmin/logout" class="btn btn-default btn-flat">退出系统</a>
                    </div>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </nav>
      </header>
      <!-- Left side column. contains the logo and sidebar -->
      <aside class="main-sidebar">

        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">

          <!-- Sidebar user panel (optional) -->
          <div class="user-panel">
            <div class="pull-left image">
              <img src="/static/adminlte/dist/img/avatar.png"  alt="User Image" />
            </div>
            <div class="pull-left info">
              <p>辉达皮套</p>
              <!-- Status -->
              <a href="#"><i class="fa fa-circle text-success"></i> 营业中</a>
            </div>
          </div>

          <!-- Sidebar Menu -->
          <ul class="sidebar-menu">
            <li class="header">功能区</li>
            <!-- Optionally, you can add icons to the links -->
            <li class="active" ctype="dashboard"><a href="javascript:void(0);"><i class='fa fa-dashboard'></i> <span>工作面板</span></a></li>
            <li ctype="orderlist"><a href="javascript:void(0);"><i class='fa fa-cart-arrow-down'></i> <span>订单管理</span></a></li>
            <li ctype="product"><a href="javascript:void(0);"><i class='fa fa-car'></i> <span>商品管理</span></a></li>
            <li ctype="appraisement"><a href="javascript:void(0);"><i class='fa fa-users'></i> <span>评价</span></a></li>
            <li class="treeview">
              <a href="javascript:void(0);"><i class='fa fa-bar-chart-o'></i> <span>统计分析</span> <i class="fa fa-angle-left pull-right"></i></a>
              <ul class="treeview-menu">
                <li ctype="statistics_sell"><a href="javascript:void(0);">销量趋势</a></li>
                <li ctype="statistics_user"><a href="javascript:void(0);">用户活跃度</a></li>
              </ul>
            </li>
            <li ctype="storeinfo"><a href="javascript:void(0);"><i class='fa fa-home'></i> <span>门店信息</span></a></li>
            <li ctype="weixinadmin"><a href="javascript:void(0);"><i class='fa fa-weixin'></i> <span>微信管理</span></a></li>
          </ul><!-- /.sidebar-menu -->
        </section>
        <!-- /.sidebar -->
      </aside>

      <!-- Content Wrapper. Contains page content -->
      <div id="page_content" class="content-wrapper">
      </div><!-- /.content-wrapper -->

      <!-- Main Footer -->
      <footer class="main-footer">
        <!-- To the right -->
        <div class="pull-right hidden-xs">
            <a href="#" data-toggle="control-sidebar"><i class="fa fa-gears">  </i></a>
        </div>
        <div class="pull-right hidden-xs">
            <strong>Copyright &copy; 2015 <a href="#">3.carriages</a></strong> 保留一切权利.
        </div>
          <!-- Default to the left -->
          当前状态
      </footer>
      
      <!-- Control Sidebar -->      
      <aside class="control-sidebar control-sidebar-dark">                
        <!-- Create the tabs -->
        <ul class="nav nav-tabs nav-justified control-sidebar-tabs">
          <li class="active"><a href="#control-sidebar-home-tab" data-toggle="tab"><i class="fa fa-home"></i></a></li>
          <li><a href="#control-sidebar-settings-tab" data-toggle="tab"><i class="fa fa-gears"></i></a></li>
        </ul>
        <!-- Tab panes -->
        <div class="tab-content">
          <!-- Home tab content -->
          <div class="tab-pane active" id="control-sidebar-home-tab">
            <h3 class="control-sidebar-heading">Recent Activity</h3>
            <ul class='control-sidebar-menu'>
              <li>
                <a href='javascript:void(0);'>
                  <i class="menu-icon fa fa-birthday-cake bg-red"></i>
                  <div class="menu-info">
                    <h4 class="control-sidebar-subheading">Langdon's Birthday</h4>
                    <p>Will be 23 on April 24th</p>
                  </div>
                </a>
              </li>              
            </ul><!-- /.control-sidebar-menu -->

            <h3 class="control-sidebar-heading">Tasks Progress</h3> 
            <ul class='control-sidebar-menu'>
              <li>
                <a href='javascript:void(0);'>
                  <h4 class="control-sidebar-subheading">
                    Custom Template Design
                    <span class="label label-danger pull-right">70%</span>
                  </h4>
                  <div class="progress progress-xxs">
                    <div class="progress-bar progress-bar-danger" style="width: 70%"></div>
                  </div>                                    
                </a>
              </li>                         
            </ul><!-- /.control-sidebar-menu -->         

          </div><!-- /.tab-pane -->
          <!-- Stats tab content -->
          <div class="tab-pane" id="control-sidebar-stats-tab">Stats Tab Content</div><!-- /.tab-pane -->
          <!-- Settings tab content -->
          <div class="tab-pane" id="control-sidebar-settings-tab">            
            <form method="post">
              <h3 class="control-sidebar-heading">General Settings</h3>
              <div class="form-group">
                <label class="control-sidebar-subheading">
                  Report panel usage
                  <input type="checkbox" class="pull-right" checked />
                </label>
                <p>
                  Some information about this general settings option
                </p>
              </div><!-- /.form-group -->
            </form>
          </div><!-- /.tab-pane -->
        </div>
      </aside><!-- /.control-sidebar -->
     
    </div><!-- ./wrapper -->

    <!-- REQUIRED JS SCRIPTS -->

    {% from 'basic.html' import basic_jsfiles, basic_js_icheck, basic_jsonrpc,
       basic_plugin_html5editor, basic_plugin_clockpicker, basic_plugin_datatables, basic_plugin_webuploader
     %}
    {{ basic_jsfiles() }}
    {{ basic_jsonrpc() }}
    {{ basic_plugin_html5editor() }}
    {{ basic_plugin_clockpicker() }}
    {{ basic_plugin_datatables() }}
    {{ basic_plugin_webuploader() }}

    <!-- AdminLTE App, KEEP this!!!! -->
    <script src="/static/adminlte/dist/js/app.min.js" type="text/javascript"></script>

    <!-- Optionally, you can add Slimscroll and FastClick plugins.
          Both of these plugins are recommended to enhance the
          user experience. Slimscroll is required when using the
          fixed layout. -->
    <!-- Modal type: modal modal-primary modal-info modal-warning modal-success modal-danger -->
    <div id="usermodal" class="modal fade modal">
    </div>

    <div id="messagemodal" class="modal fade">
    </div>

    <div id="noticemodal" class="modal fade">
    </div>

    <div id="tasksmodal" class="modal fade">
    </div>

    <div id="errormodal" class="modal fade modal-danger">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button aria-label="Close" data-dismiss="modal" class="close" type="button"><span aria-hidden="true">×</span></button>
            <h4 id="errormodal_title" class="modal-title">...</h4>
          </div>
          <div id="errormodal_text" class="modal-body">
          </div>
          <div class="modal-footer">
            <button data-dismiss="modal" class="btn btn-outline pull-left" type="button">关闭</button>
          </div>
        </div>
      </div>
    </div>

  <script>
    function getContentHtml(type, func) {
      var uri = '/dealerAdmin/dealerct_' + type + '.ct';
      var _html = undefined;
      $.ajax({
          type:'GET',
          url: uri,
          success: function(html) {
            _html = html;
            func(_html);
          },
          error: function () {
            func(_html);
          }
      });
    }

    function setPageContent(_html) {
      if(_html == undefined) {
        $("#page_content").html("请求页面内容失败！");
        //console.log("请求页面" + type + "失败!" );
      }else {
        $("#page_content").html(_html);

        if ($.isFunction(window.PageContentOnLoad)) {
          PageContentOnLoad();
        }
      }
    }

    function getPageContent(type) {
      getContentHtml(type, setPageContent);
      //var url = '/dealerAdmin/dealerct_' + type + '.ct';
      //$("#page_content").load(url);
    }

    function getContentClick() {
      var ct_type = $(this).attr("ctype");
      $(".sidebar-menu").find("li").each(function () {
        if($(this).attr("ctype") != "undefined") {
          if(ct_type == $(this).attr("ctype")) {
            $(this).addClass("active");
          }else {
            $(this).removeClass("active");
          }
        }
      });

      getPageContent(ct_type);
    }

    function errorMoal(title, text) {
      $("#errormodal_title").html(title);
      $("#errormodal_text").html(text);
      $("#errormodal").modal("show");
    }

    function userInfoUI (_html) {
      if(_html) {
        $("#usermodal").html(_html);
        $("#usermodal").modal("show");
      }else {
        errorMoal("错误", "请求用户信息失败!");
      }
    }
    // Modals action
    function userInfo() {
      getContentHtml('userinfo', userInfoUI);
    }

    $(document).ready(function(){
      $.jsonRPC.setup({
        endPoint: '/dealerApi',
        namespace: ''
      });

      $(".sidebar-menu").find("li").each(function () {
        if($(this).attr("ctype") != "undefined") {
          $(this).click(getContentClick);
        }
      });

      // load default page content.
      getPageContent('dashboard');
    });




  </script>
  </body>
</html>
